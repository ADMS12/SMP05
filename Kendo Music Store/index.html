<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta charset="utf-8" />
        <script src="cordova.js"></script>
        <script src="Plugins/Child Browser/childbrowser.js"></script>
        
        <link href="kendo/styles/kendo.mobile.all.min.css" rel="stylesheet" />
        <link href="styles/main.css" rel="stylesheet" />
    </head>
    <body>

        <!-- Home Views -->

        <div data-role="view" id="genres-view" data-layout="home-layout" data-title="Albums" data-model="app.genresView.viewModel" data-show="app.genresView.onShow">
            <ul data-role="listview" data-bind="source: genres" data-template="genre-list-template", data-style="inset" data-endless-scroll="true"></ul>
        </div>

        <div data-role="view" id="artists-view" data-layout="home-layout" data-title="Albums" data-model="app.artistsView.viewModel" data-show="app.artistsView.show" class="km-insetcontent" style="display: none;">
            <ul data-role="listview" data-bind="source: artists" data-template="artist-list-template", data-style="inset" data-endless-scroll="true" data-auto-bind="false"></ul>
        </div>
        
        <div data-role="view" id="albums-view" data-layout="base-layout" data-model="app.albumsView.viewModel" data-show="app.albumsView.show" data-transition="slide:left" style="display: none;">
            <header data-role="header">
                <div data-role="navbar">
                    <a class="nav-button" data-align="left" data-role="backbutton">Back</a>
                    <span data-role="view-title"></span>
                </div>
            </header>

            <ul data-role="listview" data-bind="source: albums, events: {lastPageReached: lastPageReached}" data-template="album-list-template", data-style="inset" data-endless-scroll="true"></ul>
        </div>


        <!-- Search Views -->

        <div data-role="view" id="search-view" data-layout="base-layout" data-title="Search" data-model="app.searchView.viewModel" data-init="app.searchView.init" data-show="app.searchView.show" style="display: none;">
            <header data-role="header">
                <div data-role="navbar">
                    <span data-role="view-title"></span>
                </div>
                <div class="search-container">
                    <input type=text class="search-text" placeholder="Album title or artist" />
                    <a data-role="button" data-icon="search" data-click="submitSearch"></a>
                </div>
            </header>

            <ul data-role="listview" data-bind="source: results" data-template="album-list-template", data-style="inset" data-endless-scroll="true" data-auto-bind="false"></ul>
        </div>


        <!-- Cart Checkout Views -->

        <div data-role="view" id="cart-view" data-layout="base-layout" data-title="Cart" data-model="app.cartView.viewModel" data-init="app.cartView.init" style="display: none;">
            <header data-role="header" class="cart-header">
                <div data-role="navbar">
                    <span data-role="view-title"></span>
                    <a data-role="button" href="#checkout-view" data-align="right" data-bind="visible: cartHasItems">Shipping</a>
                </div>
                <h3>Swipe to Remove Item</h3>
                <h1>TOTAL: <span class="total" data-bind="text: formattedTotal"></span></h1>
            </header>

            <ul data-role="listview" data-bind="source: items" data-template="cart-list-template" data-style="inset"></ul>
        </div>
        
        <div data-role="view" id="checkout-view" data-layout="base-layout" data-title="Checkout" data-model="app.checkoutView.viewModel" data-before-show="app.checkoutView.beforeShow" data-transition="slide:left" style="display: none;">
            <header data-role="header">
                <div data-role="navbar">
                    <a href="#cart-view" class="nav-button" data-align="left" data-role="backbutton">Cart</a>
                    <span data-role="view-title"></span>
                    <div data-role="button" data-align="right" data-bind="click: submit">Submit</div>
                </div>
            </header>
            
            <section class="validate" data-role="validator">
                <input type="text" name="firstName" placeholder="First Name" data-bind="value: firstName" pattern=".{0,160}" required validationmessage="!" />
                <input type="text" name="lastName" placeholder="Last Name" data-bind="value: lastName" pattern=".{0,160}" required validationmessage="!" />
                <input type="text" name="address" placeholder="Address" data-bind="value: address" pattern=".{3,70}" required validationmessage="!" />
                <input type="text" name="city" placeholder="City" data-bind="value: city" pattern=".{0,40}" required validationmessage="!"/>
                <input type="text" name="state" placeholder="State" data-bind="value: state" pattern=".{0,40}" required validationmessage="!"/>
                <input type="text" name="zip" placeholder="Postal Code" data-bind="value: zip" pattern=".{5,10}" required validationmessage="!"/>
                <input type="text" name="country" placeholder="Country" data-bind="value: country" pattern=".{0,40}" required validationmessage="!"/>
                <input type="text" name="phone" placeholder="Phone" data-bind="value: phone" pattern=".{0,24}" required validationmessage="!"/>
                <input type="text" name="email" placeholder="Email Address" data-bind="value: email" pattern=".+@.+\..{2,}" required validationmessage="!"/>
            </section>
        </div>

        <div data-role="view" id="checkout-complete-view" data-layout="base-layout" data-title="Order Complete" data-model="app.checkoutView.viewModel" data-transition="slide:left" style="display: none;">
            <header data-role="header">
                <div data-role="navbar">
                    <span data-role="view-title"></span>
                </div>
            </header>
            <div>Thank You!</div>
        </div>


        <!-- Account Views -->

        <div data-role="view" id="account-view" data-layout="base-layout" data-title="Log Off" style="display: none;" data-model="app.accountView.viewModel" data-before-show="app.accountView.beforeShow">
            <header data-role="header">
                <div data-role="navbar">
                    <span data-role="view-title"></span>
                </div>
            </header>

            <div>Hello, <span data-bind="text: userName"></span>!</div>
            <input type="submit" data-role="button" value="Log Off" data-bind="click: logout"/>
        </div>

        <div data-role="view" id="login-view" data-layout="base-layout" data-title="Log In" style="display: none;" data-model="app.accountView.viewModel" data-init="app.accountView.loginInit">
            <header data-role="header">
                <div data-role="navbar">
                    <span data-role="view-title"></span>
                </div>
            </header>

            <input type="text" placeholder="Username" data-bind="value: loginUsername" />
            <input type="password" placeholder="Password" data-bind="value: loginPassword" />
            <div type="button" data-role="button" data-bind="click: login">Log In</div>
            <a href="#register-view" data-role="button">Register</a>
        </div>
        
        <div data-role="view" id="register-view" data-layout="base-layout" data-title="Create Account" style="display: none;" data-model="app.accountView.viewModel">
            <header data-role="header">
                <div data-role="navbar">
                    <span data-role="view-title"></span>
                    <a class="nav-button" data-align="left" data-role="backbutton">Back</a>
                </div>
            </header>

            <input type="text" placeholder="Username" data-bind="value: registerUsername" />
            <input type="password" placeholder="Password" data-bind="value: registerPassword" />
            <input type="password" placeholder="Confirm Password" data-bind="value: registerPasswordRetyped" />
            <input type="button" data-role="button" value="Register" data-bind="click: register" />
        </div>


        <!-- About Views -->

        <div data-role="view" id="about-view" data-layout="base-layout" data-model="app.aboutView.viewModel" style="display: none;">
            <h1>Kendo UI Mobile Music Store</h1>
            <p>The Mobile Music Store is a demo app built using Kendo UI Mobile.</p>
            
            <footer>
                <div class="footer-images"><img src="Images/kendo-ui-logo.png"/></div>
                <a data-role="button" data-rel="actionsheet" href="#learnmore-actions">Learn More about Kendo UI</a>
            </footer>

            <ul data-role="actionsheet" id="learnmore-actions" data-popup='{"direction": "left"}'>
                <li class="km-actionsheet-title">Learn More about Kendo UI</li>
                <li><a data-bind="click: openKendoWeb">Visit www.kendoui.com</a></li>
                <li><a data-bind="click: openSource">View Source for This App</a></li>
            </ul>
        </div>


        <!-- Error Views -->

        <div data-role="modalview" id="error-view" style="display: none; width: 95%; height: 90%;">
            <div data-role="header">
                <div data-role="navbar">
                    <span>Error</span>
                    <a data-click="app.closeErrorModal" data-role="button" data-align="right">Close</a>
                </div>
            </div>
            
            <div class="message"></div>
        </div>


        <!-- Layouts -->

        <div data-role="layout" data-id="home-layout" data-init="app.homeLayout.init" data-show="app.homeLayout.show">
            <header data-role="header">
                <div data-role="navbar">
                    <span data-role="view-title"></span>
                </div>
                <ul class="select-group">
                    <li data-target="#genres-view">Genres</li>
                    <li data-target="#artists-view">Artists</li>
                </ul>
                <div class="artists-filter-header" data-role="scroller">
                    <ul class="buttongroup km-buttongroup">
                    </ul>
                </div>
            </header>

            <div data-role="footer">
                <div data-role="tabstrip">
                    <a href="#genres-view" data-icon="home">Home</a>
                    <a href="#search-view" data-icon="search">Search</a>
                    <a href="#cart-view" data-icon="cart">Cart<span class="cart-badge km-badge" style="display: none;"></span></a>
                    <a href="#account-view" data-icon="contacts">Account</a>
                    <a href="#about-view" data-icon="about">About</a>
                </div>
            </div>
        </div>

        <div data-role="layout" data-id="base-layout" data-show="app.baseLayout.show">
            <div data-role="footer">
                <div data-role="tabstrip">
                    <a href="#genres-view" data-icon="home">Home</a>
                    <a href="#search-view" data-icon="search">Search</a>
                    <a href="#cart-view" data-icon="cart">Cart<span class="cart-badge km-badge" style="display: none;"></span></a>
                    <a href="#account-view" data-icon="contacts">Account</a>
                    <a href="#about-view" data-icon="about">About</a>
                </div>
            </div>
        </div>


        <!-- Templates -->

        <script id="genre-list-template" type="text/x-kendo-template">
            <a href="\#albums-view?field=GenreId&operator=eq&value=#=GenreId#&title=#:encodeURIComponent(Name).replace("'", "%27")#">#=Name#</a>
        </script>

        <script id="artist-list-template" type="text/x-kendo-template">
            <a href="\#albums-view?field=ArtistId&operator=eq&value=#=ArtistId#&title=#:encodeURIComponent(Name).replace("'", "%27")#">#=Name#</a>
        </script>

        <script id="album-list-template" type="text/x-kendo-template">
            <img class="album-art" data-bind="attr: {src: albumArtUrl}" />
            <div class="album-cart" data-role="button" data-bind="click: onAddToCart"><span data-bind="text: qtyInCart, attr: {class: buttonClasses}"></span><span class="km-icon km-cart"></span></div>
            <div class="album-title" data-bind="text: Title"></div>
            <div class="album-artist" data-bind="text: Artist.Name"></div>
            <div class="album-price" data-bind="text: albumPrice"></div>
        </script>
        
        <script id="artist-filter-template" type="text/x-kendo-template">
            <a href="\#artists-view?value=#=data#" id="#=data#">#=data#</a>
        </script>

        <script id="cart-list-template" type="text/x-kendo-template">
            <div data-role="touch" data-enable-swipe="1" data-swipe="app.cartView.onRemove">
                <img class="album-art" data-bind="attr: {src: albumArtUrl}" />
                <div class="album-title" data-bind="text: album.Title"></div>
                <div class="album-artist" data-bind="text: album.Artist.Name"></div>
                <div class="album-price" data-bind="text: albumPrice"></div>
                <div class="qty-and-price">
                    <span>Qty:</span>
                    <input type="number" data-bind="value: qty" min="1" max="99" />
                    <span>Subtotal: </span><span data-bind="text: albumSubtotal"></span>
                </div>
            </div>
        </script>


        <!-- Scripts -->

        <script data-main="scripts/main.js" src="scripts/require.js"></script>
    </body>
</html>
